{% extends "base.html" %}
{% block content %}

<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
          <h1 class="mb-0">
              <i class="fas fa-bullhorn me-2 text-danger"></i>
              School Announcements Management
          </h1>
          <p class="text-muted mb-0">
              Manage all announcements displayed on the homepage.
          </p>
      </div>

      <a href="{% url 'accounts:dashboard' %}" class="btn btn-outline-secondary">
          <i class="fas fa-arrow-left me-1"></i> Back
      </a>
  </div>

  <hr>

  <div class="d-flex justify-content-end mb-3">
      <a href="{% url 'main:add_announcement' %}" class="btn btn-primary">
          <i class="fas fa-plus-circle me-2"></i> Create New Announcement
      </a>
  </div>

  <div class="card shadow-sm border-0">
      <div class="card-body p-0">

          {% if announcements %}
              <div class="table-responsive">
                  <table class="table table-striped table-hover align-middle mb-0">
                      <thead class="table-dark">
                          <tr>
                              <th style="width: 50px;">#</th>
                              <th>Title</th>
                              <th>Category</th>
                              <th>Important</th>
                              <th>Start</th>
                              <th>End</th>
                              <th>Created</th>
                              <th style="width: 190px;">Actions</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% for ann in announcements %}
                          <tr>
                              <td>{{ forloop.counter }}</td>

                              <td class="fw-semibold">
                                  <i class="fas fa-bullhorn me-1 text-danger"></i>
                                  {{ ann.title }}
                              </td>

                              <td>{{ ann.get_category_display }}</td>

                              <td>
                                  {% if ann.is_important %}
                                      <span class="badge bg-danger">Yes</span>
                                  {% else %}
                                      <span class="badge bg-secondary">No</span>
                                  {% endif %}
                              </td>

                              <td>{{ ann.start_date|default:"—" }}</td>
                              <td>{{ ann.end_date|default:"—" }}</td>
                              <td>{{ ann.created_at|date:"Y-m-d" }}</td>

                              <td>
                                  <a href="{% url 'main:announcement_update' ann.id %}"
                                     class="btn btn-sm btn-info me-1">
                                      <i class="fas fa-edit me-1"></i> Edit
                                  </a>

                                  <a href="{% url 'main:announcement_delete' ann.id %}"
                                     class="btn btn-sm btn-outline-danger">
                                      <i class="fas fa-trash me-1"></i> Delete
                                  </a>
                              </td>
                          </tr>
                          {% endfor %}
                      </tbody>
                  </table>
              </div>
          {% else %}
              <div class="p-4">
                  <div class="alert alert-info mb-0 text-center">
                      <i class="fas fa-info-circle me-1"></i>
                      No announcements yet.
                  </div>
              </div>
          {% endif %}

      </div>
  </div>

</div>

{% endblock %}
